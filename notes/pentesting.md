# lab 1

### nmap

- -oN output to file
- -p- ports

### smbclient identified

- list dir struct of windows fileshare
- identify share
- enumeraterate all shares including 'hidden' shares

### mount drive to explore files

- escape \\ on linux to windows ie '\\'
- \\\\ip.add.re.ss\\drive = \\ip\\drive on widows
- "get" any interesting files
- tools exist for enumerate samba shares

### 3389 remote desktop found

- attempt to connect with user info found in samba

### identify webserver and navigate to ip in browser

- default IIS home page (same as Nginx)
- enumerate web directories
- dirbuster and/or gobuster
  - takes in a wordlist
- network share matches a web directory
- smb and http share directory
  - identify vulnerability of possible file inclustion
- used metasploit to generate payload
  - open cmd and phone home
- used netcat to listen on port 443
- reverse connection for if you cant open port on host

### elevate privileges

- living of the land potential

### buffer overflow

- if data is too large it can overflow into instruction block of buffer

# Exploitation

- [kali tools website](https://www.kali.org/tools/)
- determine severity
- demonstrate real world impact
- asses effective security controls
  - privileges
  - ids
- regulations (once a year recommendation)
- systematic approach to avoid DOS (no hail marry plz)
- privileges escalation and persistence first
- pivoting in multi segment networks
- thorough documentation

## metasploit

- module based
- penetration framework
  - automation
  - customizable through python
- CLI
- Payloads
  - can hide in stuff like pdfs
  - the action maintains first access
- Meterpreter
  - dynamic can help avoid detection
- post exploitation modules
  - ongoing control collection and exploration
  - lateral movement
  - data collection
  - anonymity erase logs etc
  - monitoring and control
- aux modes
  - info gathering
  - scanning uses nmap under hood

## Timeline

- scanning
  - port  scanning
  - vuln sacn
  - http scan
- service enumeration
- vulnerability scanning
  - nessus integration (more up to date)
- information gathering
  - nmap integration
  - database integration
    - useful for saving work and querying results
- select exploit
- create payload
- establish session
  - shell
  - meterpreter (multiplexing, run metaploit commands remotely)
- persistance
  - custom backdoor
    - service
  - user account manipulation
    - privilege escalation
  - scheduled task installation
    - predefined intervals
    - specific time to avoid detection
  - service installation
  - windows registry modification
    - payload or backdoor on boot
  - privilege escalation
  - data collection
  - lateral movement
    - pivot to more systems
  - cover tracks
    - remove logs
- defence evasion
  - obfuscation
    - reduce visibility
    - encryption
  - masquerading
    - looking legit process
  - privilege escalation

## network penetration

- more common annual

## web app pen testing

- direct web manipulation

## social engineering assessment

- phishing campaigns

## red team ops

- wholistic simulation
